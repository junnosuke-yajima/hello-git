<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/stylesheet.css">
    <title>Document</title>
</head>
<body>
    <h1>link page</h1>
    <h2>git</h2>
    <div id="timer">00:00.000</div>
    <button id="start">start</button>
    <button id="stop">stop</button>
    <button id="reset">reset</button>
    <script>
        (function(){
            'use strict';
            var timer = document.getElementById('timer');
            var start = document.getElementById('start');
            var stop = document.getElementById('stop');
            var rest = document.getElementById('reset');
            var startTime;
            var elapsedTime = 0;
            var timerId;
            var timeToadd = 0;

            function updateTimeText(){
                var m = Math.floor(elapsedTime / 60000);
                var s = Math.floor(elapsedTime % 60000 / 1000);
                var ms = elapsedTime % 1000;
                m = ('0' + m).slice(-2);
                s = ('0' + s).slice(-2);
                ms = ('00' + ms).slice(-3);
                timer.textContent = m + ':' + s + '.' + ms;
            }

            function countUp(){
                timerId = setTimeout(function(){
                    elapsedTime = Date.now() - startTime + timeToadd;
                    updateTimeText();
                    countUp();
                },10);
            }

            start.addEventListener('click', function(){
                startTime = Date.now();
                countUp();
            });

            stop.addEventListener('click', function(){
                clearTimeout(timerId);
                timeToadd += Date.now() - startTime;
            });

            reset.addEventListener('click', function(){
                elapsedTime = 0;
                timeToadd = 0;
                updateTimeText();
            });
        })();
    </script>
    <a href="./index.html">トップに戻る</a>
</body>
</html>